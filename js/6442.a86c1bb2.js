"use strict";(self["webpackChunkvelzon"]=self["webpackChunkvelzon"]||[]).push([[6442],{179:function(e,a,t){t.d(a,{A:function(){return v}});t(4114);var l=t(641),s=t(33),n=t(3751),u=t(953);const i={class:"mb-0 text-muted"},r={class:"fw-semibold"},c={class:"fw-semibold"},o={class:"fw-semibold text-decoration-underline"},d={class:"pagination pagination-separated mb-0"},k={key:1,class:"page-link"};var m={__name:"pagination",props:{currentPage:{type:Number,default:1},perPage:{type:Number,default:10},total:{type:Number,default:0}},emits:["pageChange","perPageChange"],setup(e,{emit:a}){const t=e,m=a,g=(0,u.KR)(t.perPage),v=(0,l.EW)(()=>Math.ceil(t.total/g.value)),p=(0,l.EW)(()=>0===t.total?0:(t.currentPage-1)*g.value+1),b=(0,l.EW)(()=>Math.min(t.currentPage*g.value,t.total)),f=(0,l.EW)(()=>{const e=[];if(v.value<=7)for(let a=1;a<=v.value;a++)e.push(a);else{e.push(1);let a=Math.max(2,t.currentPage-2),l=Math.min(v.value-1,t.currentPage+2);t.currentPage<=4?l=5:t.currentPage>=v.value-3&&(a=v.value-4),a>2&&e.push("…");for(let t=a;t<=l;t++)e.push(t);l<v.value-1&&e.push("…"),e.push(v.value)}return e}),_=e=>{e>=1&&e<=v.value&&m("pageChange",e)},L=()=>m("perPageChange",g.value);return(a,u)=>{const m=(0,l.g2)("BFormSelect"),h=(0,l.g2)("BCol"),y=(0,l.g2)("BLink"),C=(0,l.g2)("BRow");return(0,l.uX)(),(0,l.Wv)(C,{class:"g-0 text-center text-sm-start align-items-center"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{sm:"4",class:"d-flex align-items-center gap-3"},{default:(0,l.k6)(()=>[(0,l.Lk)("p",i,[u[3]||(u[3]=(0,l.eW)(" Showing ",-1)),(0,l.Lk)("span",r,(0,s.v_)(p.value),1),u[4]||(u[4]=(0,l.eW)(" to ",-1)),(0,l.Lk)("span",c,(0,s.v_)(b.value),1),u[5]||(u[5]=(0,l.eW)(" of ",-1)),(0,l.Lk)("span",o,(0,s.v_)(e.total),1),u[6]||(u[6]=(0,l.eW)(" entries ",-1))]),(0,l.bF)(m,{modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=e=>g.value=e),options:[10,20,30,50,100],class:"w-auto",onChange:L},null,8,["modelValue"])]),_:1}),(0,l.bF)(h,{sm:"8",class:"d-flex justify-content-end"},{default:(0,l.k6)(()=>[(0,l.Lk)("ul",d,[(0,l.Lk)("li",{class:(0,s.C4)(["page-item",{disabled:t.currentPage<=1}])},[(0,l.bF)(y,{href:"#",class:"page-link",onClick:u[1]||(u[1]=(0,n.D$)(e=>_(t.currentPage-1),["prevent"]))},{default:(0,l.k6)(()=>u[7]||(u[7]=[(0,l.eW)(" Previous ",-1)])),_:1,__:[7]})],2),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.value,(e,a)=>((0,l.uX)(),(0,l.CE)("li",{key:a,class:(0,s.C4)(["page-item",{active:t.currentPage===e,disabled:"…"===e}])},["…"!==e?((0,l.uX)(),(0,l.Wv)(y,{key:0,href:"#",class:"page-link",onClick:(0,n.D$)(a=>_(e),["prevent"])},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(e),1)]),_:2},1032,["onClick"])):((0,l.uX)(),(0,l.CE)("span",k,"…"))],2))),128)),(0,l.Lk)("li",{class:(0,s.C4)(["page-item",{disabled:t.currentPage>=v.value}])},[(0,l.bF)(y,{href:"#",class:"page-link",onClick:u[2]||(u[2]=(0,n.D$)(e=>_(t.currentPage+1),["prevent"]))},{default:(0,l.k6)(()=>u[8]||(u[8]=[(0,l.eW)(" Next ",-1)])),_:1,__:[8]})],2)])]),_:1})]),_:1})}}};const g=m;var v=g},3005:function(e,a,t){t.r(a),t.d(a,{default:function(){return M}});t(8111),t(1701);var l=t(641),s=t(3751),n=t(33),u=t(953),i=t(8674),r=t(2266),c=t(4306),o=t(179),d=t(7016),k=t(4646),m=t(5885);const g={class:"search-box"},v={class:"table-responsive table-card mb-1"},p={class:"table table-nowrap align-middle"},b={key:0},f={colspan:"5",class:"text-center"},_={class:"text-center"},L={key:0},h={key:0,class:"notification-content pb-2"},y={class:"notification-header mb-4"},C={class:"d-flex align-items-center gap-3"},x={class:"flex-grow-1"},F={class:"notification-title mb-1"},w={class:"d-flex align-items-center gap-2 flex-wrap"},P={key:0,class:"badge bg-success"},W={key:1,class:"badge bg-warning text-dark"},E={class:"notification-message text-muted"},R={key:0},X={class:"me-2"},K={class:"text-muted text-end"},B={key:1,class:"text-muted"},N={class:"meta-list"},V={class:"meta-item d-flex align-items-center mb-3"},A={class:"meta-item d-flex align-items-center mb-3"},U={class:"meta-item d-flex align-items-center"},D={class:"w-100 d-flex justify-content-end"};var S={__name:"view-notifications",setup(e){const a=(0,u.KR)(!1),t=(0,u.KR)(10),S=(0,u.KR)(1),j=(0,u.KR)(0),M=(0,u.KR)(""),z=(0,u.KR)([]),I={animationData:c},$=()=>{M.value="",ae(1)},J=e=>{t.value=e,ae(1)},O=(0,u.KR)(!1),Q=(0,u.KR)(null),q=e=>{Q.value={...e,meta:e.data?JSON.parse(e.data):{}},O.value=!0},G=e=>{const a={contact_message:"contact-type",system_alert:"system-type",user_action:"user-type",default:"default-type"};return a[e]||a.default},H=e=>{const a={contact_message:"ri-contacts-line",system_alert:"ri-alarm-warning-line",user_action:"ri-user-follow-line",default:"ri-notification-line"};return a[e]||a.default},T=e=>{const a={contact_message:"bg-primary",system_alert:"bg-warning text-dark",user_action:"bg-info",default:"bg-secondary"};return a[e]||a.default},Y=e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),Z=e=>e?.name||"System Generated",ee=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),ae=async(e=1)=>{S.value=e,a.value=!0;try{const a=await(0,m.cP)({search:M.value,per_page:t.value,page:e,type:"user"}),l=a.data;z.value=l.items||[],j.value=l.total||0}catch(l){console.error(l),k.A.fire({icon:"error",title:l.response?.data?.message||"An error occurred while processing."})}finally{a.value=!1}};return(0,l.sV)(()=>ae()),(e,c)=>{const k=(0,l.g2)("BCol"),m=(0,l.g2)("BButton"),te=(0,l.g2)("BRow"),le=(0,l.g2)("BCardHeader"),se=(0,l.g2)("BCardBody"),ne=(0,l.g2)("BCard"),ue=(0,l.g2)("BModal");return(0,l.uX)(),(0,l.Wv)(i.A,null,{default:(0,l.k6)(()=>[(0,l.bF)(te,null,{default:(0,l.k6)(()=>[(0,l.bF)(k,{lg:"12"},{default:(0,l.k6)(()=>[(0,l.bF)(ne,{"no-body":"",id:"logList"},{default:(0,l.k6)(()=>[(0,l.bF)(le,{class:"border-0 mb-3"},{default:(0,l.k6)(()=>[(0,l.bF)(te,{class:"align-items-center gy-3"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{cols:"sm"},{default:(0,l.k6)(()=>c[5]||(c[5]=[(0,l.Lk)("h5",{class:"card-title mb-0"},"Notifications",-1)])),_:1,__:[5]}),(0,l.bF)(k,{sm:"auto",class:"d-flex gap-2 align-items-center"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",g,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control search","onUpdate:modelValue":c[0]||(c[0]=e=>M.value=e),placeholder:"Search...",onKeyup:c[1]||(c[1]=(0,s.jR)(e=>ae(1),["enter"]))},null,544),[[s.Jo,M.value]]),c[6]||(c[6]=(0,l.Lk)("i",{class:"ri-search-line search-icon"},null,-1))]),(0,l.bF)(m,{type:"button",variant:"primary",class:"w-auto",onClick:c[2]||(c[2]=e=>ae(1))},{default:(0,l.k6)(()=>c[7]||(c[7]=[(0,l.Lk)("i",{class:"ri-equalizer-fill me-1 align-bottom"},null,-1),(0,l.eW)(" Filters ",-1)])),_:1,__:[7]}),(0,l.bF)(m,{type:"button",variant:"danger",class:"w-auto",onClick:$},{default:(0,l.k6)(()=>c[8]||(c[8]=[(0,l.Lk)("i",{class:"ri-close-circle-line align-bottom"},null,-1)])),_:1,__:[8]})]),_:1})]),_:1})]),_:1}),(0,l.bF)(se,{class:"pt-0"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",v,[(0,l.Lk)("table",p,[c[12]||(c[12]=(0,l.Lk)("thead",{class:"text-muted table-light"},[(0,l.Lk)("tr",{class:"text-uppercase"},[(0,l.Lk)("th",null,"No."),(0,l.Lk)("th",null,"Title"),(0,l.Lk)("th",null,"Status"),(0,l.Lk)("th",null,"Created"),(0,l.Lk)("th",{class:"text-center"},"Action")])],-1)),(0,l.Lk)("tbody",null,[a.value?((0,l.uX)(),(0,l.CE)("tr",b,[(0,l.Lk)("td",f,[(0,l.bF)(r.A,{class:"avatar-xl",options:I,height:75,width:75}),c[9]||(c[9]=(0,l.Lk)("h5",{class:"mt-2"},"Loading...",-1))])])):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(z.value,(e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,n.v_)((S.value-1)*t.value+a+1),1),(0,l.Lk)("td",null,(0,n.v_)(e.title),1),(0,l.Lk)("td",null,[(0,l.Lk)("span",{class:(0,n.C4)(e.is_read?"badge bg-success-subtle text-success fs-12":"badge bg-danger-subtle text-danger fs-12")},(0,n.v_)(e.is_read?"Read":"Unread"),3)]),(0,l.Lk)("td",null,(0,n.v_)((0,u.R1)(d.r6)(e.created_at)),1),(0,l.Lk)("td",_,[(0,l.bF)(m,{size:"sm",variant:"soft-primary",onClick:a=>q(e)},{default:(0,l.k6)(()=>c[10]||(c[10]=[(0,l.Lk)("i",{class:"ri-eye-line"},null,-1),(0,l.eW)(" View ",-1)])),_:2,__:[10]},1032,["onClick"])])]))),128)),z.value.length?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("tr",L,c[11]||(c[11]=[(0,l.Lk)("td",{colspan:"5",class:"text-center text-muted"},[(0,l.Lk)("h5",{class:"mt-2"},"No Result Found"),(0,l.Lk)("p",{class:"mb-0"}," We didn’t find any records for your search. ")],-1)])))],64))])])]),(0,l.bF)(o.A,{currentPage:S.value,perPage:t.value,total:j.value,onPageChange:ae,onPerPageChange:J},null,8,["currentPage","perPage","total"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,l.bF)(ue,{modelValue:O.value,"onUpdate:modelValue":c[4]||(c[4]=e=>O.value=e),size:"lg",centered:"",title:Q.value?Q.value.title:"Notification Details",class:"v-modal-custom","hide-header-close":"","no-close-on-backdrop":""},{footer:(0,l.k6)(()=>[(0,l.Lk)("div",D,[(0,l.bF)(m,{variant:"outline-secondary",onClick:c[3]||(c[3]=e=>O.value=!1)},{default:(0,l.k6)(()=>c[26]||(c[26]=[(0,l.Lk)("i",{class:"ri-close-line me-1"},null,-1),(0,l.eW)("Close ",-1)])),_:1,__:[26]})])]),default:(0,l.k6)(()=>[Q.value?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",y,[(0,l.Lk)("div",C,[(0,l.Lk)("div",{class:(0,n.C4)(["notification-icon",G(Q.value.type)])},[(0,l.Lk)("i",{class:(0,n.C4)(H(Q.value.type))},null,2)],2),(0,l.Lk)("div",x,[(0,l.Lk)("h5",F,(0,n.v_)(Q.value.title),1),(0,l.Lk)("div",w,[(0,l.Lk)("span",{class:(0,n.C4)(["badge",T(Q.value.type)])},(0,n.v_)(ee(Q.value.type)),3),Q.value.is_read?((0,l.uX)(),(0,l.CE)("span",P,c[13]||(c[13]=[(0,l.Lk)("i",{class:"ri-check-double-line me-1"},null,-1),(0,l.eW)(" Read ",-1)]))):((0,l.uX)(),(0,l.CE)("span",W,c[14]||(c[14]=[(0,l.Lk)("i",{class:"ri-check-line me-1"},null,-1),(0,l.eW)(" Unread ",-1)])))])])])]),(0,l.bF)(te,{class:"g-4"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{lg:"8"},{default:(0,l.k6)(()=>[(0,l.bF)(ne,{class:"h-100 border-0 shadow-sm"},{default:(0,l.k6)(()=>[(0,l.bF)(se,null,{default:(0,l.k6)(()=>[c[16]||(c[16]=(0,l.Lk)("h6",{class:"card-title text-primary mb-3"},[(0,l.Lk)("i",{class:"ri-message-2-line me-2"}),(0,l.eW)("Message Details ")],-1)),(0,l.Lk)("p",E,(0,n.v_)(Q.value.message),1),c[17]||(c[17]=(0,l.Lk)("hr",null,null,-1)),c[18]||(c[18]=(0,l.Lk)("h6",{class:"card-title text-primary mb-3 mt-4"},[(0,l.Lk)("i",{class:"ri-database-2-line me-2"}),(0,l.eW)("Notification Data ")],-1)),Q.value.meta&&Object.keys(Q.value.meta).length?((0,l.uX)(),(0,l.CE)("div",R,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Q.value.meta,(e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"d-flex justify-content-between border-bottom py-2"},[(0,l.Lk)("strong",X,(0,n.v_)(Y(a))+":",1),(0,l.Lk)("span",K,(0,n.v_)(e),1)]))),128))])):((0,l.uX)(),(0,l.CE)("p",B,c[15]||(c[15]=[(0,l.Lk)("em",null,"No extra metadata provided.",-1)])))]),_:1,__:[16,17,18]})]),_:1})]),_:1}),(0,l.bF)(k,{lg:"4"},{default:(0,l.k6)(()=>[(0,l.bF)(ne,{class:"h-100 border-0 shadow-sm"},{default:(0,l.k6)(()=>[(0,l.bF)(se,null,{default:(0,l.k6)(()=>[c[25]||(c[25]=(0,l.Lk)("h6",{class:"card-title text-primary mb-3"},[(0,l.Lk)("i",{class:"ri-information-line me-2"}),(0,l.eW)("Information ")],-1)),(0,l.Lk)("div",N,[(0,l.Lk)("div",V,[c[20]||(c[20]=(0,l.Lk)("i",{class:"ri-time-line text-muted me-2"},null,-1)),(0,l.Lk)("div",null,[c[19]||(c[19]=(0,l.Lk)("small",{class:"text-muted d-block"},"Received",-1)),(0,l.Lk)("strong",null,(0,n.v_)((0,u.R1)(d.r6)(Q.value.created_at)),1)])]),(0,l.Lk)("div",A,[c[22]||(c[22]=(0,l.Lk)("i",{class:"ri-user-line text-muted me-2"},null,-1)),(0,l.Lk)("div",null,[c[21]||(c[21]=(0,l.Lk)("small",{class:"text-muted d-block"},"Sender",-1)),(0,l.Lk)("strong",null,(0,n.v_)(Z(Q.value.user)),1)])]),(0,l.Lk)("div",U,[c[24]||(c[24]=(0,l.Lk)("i",{class:"ri-refresh-line text-muted me-2"},null,-1)),(0,l.Lk)("div",null,[c[23]||(c[23]=(0,l.Lk)("small",{class:"text-muted d-block"},"Last Updated",-1)),(0,l.Lk)("strong",null,(0,n.v_)((0,u.R1)(d.r6)(Q.value.updated_at)),1)])])])]),_:1,__:[25]})]),_:1})]),_:1})]),_:1})])):(0,l.Q3)("",!0)]),_:1},8,["modelValue","title"])]),_:1})}}};const j=S;var M=j}}]);
//# sourceMappingURL=6442.a86c1bb2.js.map